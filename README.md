## AWS Glue Spark History Server (Dockerized)

Easily launch a local Spark History Server using Docker to view and analyze Spark UI event logs generated by AWS Glue
jobs. This setup allows you to explore completed Glue job runs without needing an EC2 instance, using your local machine
and Docker.

---

### Repository Structure

---

```
├── Dockerfile                 # Builds the Spark History Server Docker image
├── pom.xml                    # Defines project dependencies (Spark, Hadoop, AWS SDK)
├── run.sh                     # Script to run the server using AWS credentials
├── config.sh                  # Configuration file for AWS credentials and S3 bucket
└── README.md                  # Project documentation
```


### Prerequisites

---

- [Docker](https://docs.docker.com/get-docker/) installed locally.
- Access to the S3 bucket where AWS Glue Spark event logs are stored.
- AWS CLI profile configured (`~/.aws/credentials`) or Direct AWS Access and Secret Key (and optionally, a Session Token).


### Getting Started

---

Follow these steps to quickly launch the AWS Glue Spark History Server:

1. **Clone the repository**
    ```bash
    git clone https://github.com/SimonJoz/aws-glue-spark-ui.git
    cd aws-glue-spark-ui
    chmod +x run.sh config.sh
    ```
2. **Configure your AWS credentials and S3 log directory in `config.sh`**
3. **Run the Spark History Server**
    ```bash
    ./run.sh profile
    # or   
    ./run.sh access
    # or
    ./run.sh temporary
    ```

4. **Open your browser and go to: [http://localhost:18080](http://localhost:18080) to access the Spark UI**


### Running the Spark History Server (Details)

---

The `run.sh` script handles launching the Spark History Server using your AWS credentials, based on the configuration
in `config.sh`.


#### Supported Authentication Methods

---

- **AWS CLI Profile**: If you have an AWS CLI profile configured (e.g., `~/.aws/credentials`), set
  the `AWS_PROFILE_NAME` variable in `config.sh`.
- **Static AWS Credentials**: If you are using AWS Access Key and Secret Key, set `AWS_ACCESS_KEY_ID`
  and `AWS_SECRET_ACCESS_KEY` in `config.sh`.
- **Temporary AWS Credentials**: If you are using temporary credentials (Session Token),
  set `AWS_ACCESS_KEY_ID`, `AWS_SECRET_ACCESS_KEY`, and `AWS_SESSION_TOKEN` in `config.sh`.

Each method:

- Builds the Docker image (if not already built).
- Starts a container running the Spark History Server.
- Connects to the specified S3 bucket to fetch Glue Spark logs.


### Summary

---

- **Configure** your AWS credentials and S3 bucket in `config.sh`.
- **Run** the script with `./run.sh`.
- **Browse** your AWS Glue Spark job history at [http://localhost:18080](http://localhost:18080).
